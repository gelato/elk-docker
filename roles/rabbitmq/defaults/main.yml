---

  # ################
  # Playbook control
  # ################

  rabbitmq_plugins:
    - rabbitmq_management

  ############################
  ##RabbitMQ environment conf
  # rabbitmq_conf_env:
  #   RABBITMQ_ROCKS: correct
  # Will generate:
  # RABBITMQ_ROCKS="correct"

  #############
  ##Federation
  # Defining the federation upstream configuration:
  #
  # rabbitmq_federation_upstream:
  #   - name: upstream name
  #     vhost: local vhost to federate
  #     value: json description of the federation
  #     local_username: the local username for the federation
  #
  # Defining the policy configuration:
  #
  # rabbitmq_policy_configuration:
  #   - name: name of the policy
  #     vhost: vhost where the policy will be applied
  #     pattern: pattern of the policy
  #     tags: description of the policy in dict form # exemple: "ha-mode=all"

  rabbitmq_federation: false

  # Take the package given by the OS/distrib
  rabbitmq_os_package: false

  rabbitmq_vhost_definitions:
  - name:    logstash
    node:    "rabbit"
    tracing: yes

  rabbitmq_users_definitions:
  - vhost:    logstash
    user:     logstash
    password: logmqstash
    node:     "rabbit"
    tags:
    - administrator
    # configure_priv: "^resource.*" # Optional, defaults to ".*"
    # read_priv: "^$" # Disallow reading.
    # write_priv: "^$" # Disallow writing.

  rabbitmq_config:
    - queue_name: logstash
      durable: true
      exchange_name: logstash_reciever
      type: direct
      routing_key: logstash
      tags: 'ha-mode=all,ha-sync-mode=automatic'
      vhost: logstash
      user: logstash
      password: logmqstash
      node: "rabbit"  # Optional, defaults to "rabbit"

  config_rabbitmq_ha: true
  enable_rabbitmq_clustering: true
  erlang_cookie: 3hmAI0LdywU3YUAI0L


  rabbitmq_master: node1

  rabbitmq_config_templates: "vars/rabbitmq/templates"
  erlang_cookie_file: '/var/lib/rabbitmq/.erlang.cookie'


  # Plugins
  rabbitmq_new_only: 'no'

  # defaults file for rabbitmq
  rabbitmq_cacert     : "files/rabbitmq_cacert.pem"
  rabbitmq_server_key : "files/rabbitmq_server_key.pem"
  rabbitmq_server_cert: "files/rabbitmq_server_cert.pem"
  rabbitmq_ssl        : false
  central_queue_message_ttl: 20000

  # ######################
  # RabbitMQ Configuration
  # ######################

  # rabbitmq TCP configuration
  rabbitmq_conf_tcp_listeners_address: '0.0.0.0'
  rabbitmq_conf_tcp_listeners_port: 5672

  # rabbitmq SSL configuration
  rabbitmq_conf_ssl_listeners_address           : '0.0.0.0'
  rabbitmq_conf_ssl_listeners_port              : 5671
  rabbitmq_conf_ssl_options_cacertfile          : "/etc/rabbitmq/ssl/{{ rabbitmq_cacert | basename }}"
  rabbitmq_conf_ssl_options_certfile            : "/etc/rabbitmq/ssl/{{ rabbitmq_server_cert | basename }}"
  rabbitmq_conf_ssl_options_keyfile             : "/etc/rabbitmq/ssl/{{ rabbitmq_server_key | basename }}"
  rabbitmq_conf_ssl_options_fail_if_no_peer_cert: "true"

  rabbitmq_env: false # list RABBIT=123
