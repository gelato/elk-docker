<?php

# {{ ansible_managed }}
## Have a look in includes/defaults.inc.php for examples of settings you can set here. DO NOT EDIT defaults.inc.php!

### Appearence
$config['site_style']       = "{{ librenms_site_style }}";
$config['page_refresh']     = "{{ librenms_page_refresh }}";
# $config['front_page']       = "pages/front/default.php";
$config['front_page_settings']['top']['ports'] = 10;
$config['front_page_settings']['top']['devices'] = 10;
$config['front_page_down_box_limit'] = 10;
$config['vertical_summary'] = 0; // Enable to use vertical summary on front page instead of horizontal
$config['top_ports']        = 1; // This enables the top X ports box
$config['top_devices']      = 1; // This enables the top X devices box
$config['login_message']    = "Unauthorised access or use shall render the user liable to criminal and/or civil prosecution.";
$config['public_status']    = "{{ librenms_public_status }}";
$config['show_locations']          = 1;  # Enable Locations on menu
$config['show_locations_dropdown'] = 1;  # Enable Locations dropdown on menu
$config['int_customers']           = 0;  # Enable Customer Port Parsing
$config['summary_errors']          = 0;  # Show Errored ports in summary boxes on the dashboard
$config['customers_descr']         = 'cust'; // The description to look for in ifDescr. Can be an array as well array('cust','cid');
$config['transit_descr']           = ""; // Add custom transit descriptions (can be an array)
$config['peering_descr']           = ""; // Add custom peering descriptions (can be an array)
$config['core_descr']              = ""; // Add custom core descriptions (can be an array)
$config['custom_descr']            = ""; // Add custom interface descriptions (can be an array)
$config['int_transit']             = 1;  # Enable Transit Types
$config['int_peering']             = 1;  # Enable Peering Types
$config['int_core']                = 1;  # Enable Core Port Types
$config['int_l2tp']                = 1;  # Enable L2TP Port Types
$config['show_overview_tab'] = TRUE;
$config['overview_show_sysDescr'] = TRUE;
$config['enable_clear_discovery'] = 1;
$config['enable_footer'] = 1;

### Discovery
$config['show_services']           = 1;  # Enable Services on menu
$config['autodiscovery']['xdp']            = FALSE;
$config['autodiscovery']['ospf']           = FALSE;
$config['autodiscovery']['bgp']            = FALSE;
$config['autodiscovery']['snmpscan']       = TRUE;
$config['discover_services']               = TRUE;
$config['autodiscovery']['nets-exclude'][] = "169.254.0.0/16";
$config['autodiscovery']['nets-exclude'][] = "224.0.0.0/4";
$config['autodiscovery']['nets-exclude'][] = "240.0.0.0/4";
$config['discovery_by_ip'] = true;
$config['discovery_modules']['os']                        = 1;
$config['discovery_modules']['ports']                     = 1;
$config['discovery_modules']['ports-stack']               = 1;
$config['discovery_modules']['entity-physical']           = 1;
$config['discovery_modules']['processors']                = 1;
$config['discovery_modules']['mempools']                  = 1;
$config['discovery_modules']['cisco-vrf-lite']            = 1;
$config['discovery_modules']['ipv4-addresses']            = 1;
$config['discovery_modules']['ipv6-addresses']            = 1;
$config['discovery_modules']['route']                     = 1;
$config['discovery_modules']['sensors']                   = 1;
$config['discovery_modules']['storage']                   = 1;
$config['discovery_modules']['hr-device']                 = 1;
$config['discovery_modules']['discovery-protocols']       = 1;
$config['discovery_modules']['arp-table']                 = 1;
$config['discovery_modules']['discovery-arp']             = 1;
$config['discovery_modules']['junose-atm-vp']             = 1;
$config['discovery_modules']['bgp-peers']                 = 1;
$config['discovery_modules']['vlans']                     = 1;
$config['discovery_modules']['cisco-mac-accounting']      = 1;
$config['discovery_modules']['cisco-pw']                  = 1;
$config['discovery_modules']['cisco-vrf']                 = 1;
$config['discovery_modules']['cisco-cef']                 = 1;
$config['discovery_modules']['cisco-sla']                 = 1;
$config['discovery_modules']['vmware-vminfo']             = 1;
$config['discovery_modules']['libvirt-vminfo']            = 1;
$config['discovery_modules']['toner']                     = 1;
$config['discovery_modules']['ucd-diskio']                = 1;
$config['discovery_modules']['services']                  = 1;
$config['discovery_modules']['charge']                    = 1;

#Add host settings
$config['addhost_alwayscheckip']   = TRUE;


### Global modules
$config['enable_bgp']                   = 1; # Enable BGP session collection and display
$config['enable_syslog']                = 1; # Enable Syslog
$config['enable_inventory']             = 1; # Enable Inventory
$config['enable_pseudowires']           = 1; # Enable Pseudowires
$config['enable_vrfs']                  = 1; # Enable VRFs
$config['enable_printers']              = 1; # Enable Printer support
$config['enable_sla']                   = 1; # Enable Cisco SLA collection and display
$config['port_descr_parser']            = "includes/port-descr-parser.inc.php";

### Port configs
$config['enable_ports_etherlike']       = 0;
$config['enable_ports_junoseatmvp']     = 0;
$config['enable_ports_adsl']            = 0;
$config['enable_ports_poe']             = 0;

### Database config
$config['db_host'] = '{{ librenms_db_host }}';
$config['db_user'] = '{{ librenms_db_user }}';
$config['db_pass'] = '{{ librenms_db_pass }}';
$config['db_name'] = '{{ librenms_db_name }}';
$config['db']['extension'] = 'mysqli';// mysql or mysqli

### Memcached config - We use this to store realtime usage
$config['memcached']['enable']  = TRUE;
$config['memcached']['host']    = 'localhost';
$config['memcached']['port']    = 11211;

// This is the user LibreNMS will run as
// Please ensure this user is created and has the correct permissions to your install
$config['user'] = "{{ librenms_user }}";

## Locations - it is recommended to keep the default
$config['install_dir']  = "{{ librenms_path }}";

### This should *only* be set if you want to *force* a particular hostname/port
### It will prevent the web interface being usable form any other hostname
#$config['base_url']        = "http://librenms.local";

### Enable this to use rrdcached. Be sure rrd_dir is within the rrdcached dir
### and that your web server has permission to talk to rrdcached.
$config['rrdcached'] = "unix:/var/run/rrdcached/rrdcached.sock";
$config['rrdcached_dir'] = "/opt/librenms/rrd";
$config['rrdtool'] = "/usr/bin/rrdtool";

# ICMP
$config['icmp_check'] = "{{ librenms_icmp_check }}";
$config['fping'] = "{{ librenms_fping }}";
$config['fping6']           = "fping6";
$config['fping_options']['retries'] = "{{ librenms_fping_retries }}";
$config['fping_options']['timeout'] = "{{ librenms_fping_timeout }}";
$config['fping_options']['count'] = "{{ librenms_fping_count }}";
$config['fping_options']['millisec'] = "{{ librenms_fping_millisec }}";

# SNMP
$config['snmpwalk']         = "{{ librenms_snmpwalk }}";
$config['snmpbulkwalk'] = "{{ librenms_snmpbulkwalk }}";
$config['snmp']['community'] = array("public");
$config['snmp']['timeout'] = 1;            # timeout in seconds
$config['snmp']['retries'] = 5;            # how many times to retry the query
$config['snmp']['transports'] = array('udp', 'tcp');
$config['snmp']['version'] = "v3";         # Default version to use
$config['snmp']['port'] = 161;
$config['snmp']['v3'][0]['authlevel'] = "authPriv";  # noAuthNoPriv | authNoPriv | authPriv
$config['snmp']['v3'][0]['authname'] = "bootstrap";           # User Name (required even for noAuthNoPriv)
$config['snmp']['v3'][0]['authpass'] = "tpassword";               # Auth Passphrase
$config['snmp']['v3'][0]['authalgo'] = "MD5";            # MD5 | SHA
$config['snmp']['v3'][0]['cryptopass'] = "tpassword";             # Privacy (Encryption) Passphrase
$config['snmp']['v3'][0]['cryptoalgo'] = "DES";          # AES | DES

# SNMP program locations
$config['whois']            = "/usr/bin/whois";
$config['ping']             = "/bin/ping";
$config['mtr']              = "{{ librenms_mtr_loc }}";
$config['nmap']             = "/usr/bin/nmap";
$config['ipmitool']         = "/usr/bin/ipmitool";
$config['virsh']            = "/usr/bin/virsh";
$config['dot']              = "/usr/bin/dot";
$config['unflatten']        = "/usr/bin/unflatten";
$config['neato']            = "/usr/bin/neato";
$config['sfdp']             = "/usr/bin/sfdp";

### Storage

$config['ignore_mount_removable']  = 1;
$config['ignore_mount_network']    = 1;
$config['ignore_mount_optical']    = 1;

$config['ignore_mount'][] = "/kern";
$config['ignore_mount'][] = "/mnt/cdrom";
$config['ignore_mount'][] = "/proc";
$config['ignore_mount'][] = "/dev";

$config['ignore_mount_string'][] = "packages";
$config['ignore_mount_string'][] = "devfs";
$config['ignore_mount_string'][] = "procfs";
$config['ignore_mount_string'][] = "UMA";
$config['ignore_mount_string'][] = "MALLOC";

$config['ignore_mount_regexp'][] = "/on: \/packages/";
$config['ignore_mount_regexp'][] = "/on: \/dev/";
$config['ignore_mount_regexp'][] = "/on: \/proc/";
$config['ignore_mount_regexp'][] = "/on: \/junos^/";
$config['ignore_mount_regexp'][] = "/on: \/junos\/dev/";
$config['ignore_mount_regexp'][] = "/on: \/jail\/dev/";
$config['ignore_mount_regexp'][] = "/^(dev|proc)fs/";
$config['ignore_mount_regexp'][] = "/^\/dev\/md0/";
$config['ignore_mount_regexp'][] = "/^\/var\/dhcpd\/dev,/";
$config['ignore_mount_regexp'][] = "/UMA/";

### Cleanup

$config['syslog_purge']                                   = 30;
$config['eventlog_purge']                                 = 30;
$config['authlog_purge']                                  = 30;
$config['perf_times_purge']                               = 30;
$config['device_perf_purge']                              = 30;

# POLLER
{% for poller in librenms_pollers_disabled %}
$config['poller_modules']['{{ poller }}'] = 0;
{% endfor %}
$config['poller_modules']['mib'] = 1;

# RANCID
{% for path in librenms_rancid_configs %}
$config['rancid_configs'][] = "{{ path }}";
{% endfor %}

{% if librenms_collectd_dir %}
# COLLECTD
$config['collectd_dir']     = "{{ librenms_collectd_dir }}";
$config['collectd_sock']    = "{{ librenms_collectd_sock }}";
{% endif %}

{% if librenms_smokeping_dir %}
# SMOKEPING
$config['smokeping']['dir']   = "{{ librenms_smokeping_dir }}";
$config['smokeping']['pings'] = "{{ librenms_smokeping_pings }}";
{% endif %}

# SERVICES
$config['show_services']  = "{{ librenms_services_enable|int }}";
$config['nagios_plugins']   = "{{ librenms_nagios_plugins_loc }}";

# WEB
$config['web_mouseover'] = {{ librenms_web_mouseover }};
$config['enable_lazy_load'] = true;

### AUTHENTICATION
$config['auth_mechanism'] = "{{ librenms_auth_mechanism }}"; # default, other options: ldap, http-auth
#$config['http_auth_guest'] = "guest"; # remember to configure this user if you use http-auth

$config['auth_ldap_version']   = "{{ librenms_ldap_version }}";
$config['auth_ldap_server']    = "{{ librenms_ldap_server }}";
$config['auth_ldap_port']      = "{{ librenms_ldap_port }}";
$config['auth_ldap_starttls']  = "{{ librenms_ldap_starttls }}";
$config['auth_ldap_prefix']    = "{{ librenms_ldap_prefix }}";
$config['auth_ldap_suffix']    = "{{ librenms_ldap_suffix }}";
$config['auth_ldap_group']     = "{{ librenms_ldap_group }}";
$config['auth_ldap_emailattr'] = "{{ librenms_ldap_emailattr }}";

$config['auth_ldap_groupbase']       = "{{ librenms_ldap_groupbase }}";
$config['auth_ldap_groupmemberattr'] = "{{ librenms_ldap_groupmemberattr }}";
{% for group in librenms_auth_ldap_groups %}
$config['auth_ldap_groups']['{{ group.name }}']['level'] = "{{ group.level }}";
{% endfor %}

### ALERT
$config['email_backend']       = "{{ librenms_email_backend }}";
$config['email_from']          = "{{ librenms_email_from }}";
$config['email_user']          = "{{ librenms_email_user }}";
$config['email_sendmail_path'] = "{{ librenms_email_sendmail_path }}";
$config['email_smtp_host']     = "{{ librenms_email_smtp_host }}";
$config['email_smtp_port']     = "{{ librenms_email_smtp_port }}";
$config['email_smtp_timeout']  = "{{ librenms_email_smtp_timeout }}";
$config['email_smtp_secure']   = "{{ librenms_email_smtp_secure }}";
$config['email_smtp_username'] = "{{ librenms_email_smtp_username }}";
$config['email_smtp_password'] = "{{ librenms_email_smtp_password }}";

{% if librenms_alerts_bgp_whitelist %}
{% for asn in librenms_alerts_bgp_whitelist %}
$config['alerts']['bgp']['whitelist'][]    = "{{ asn }}";
{% endfor %}
{% endif %}

### List of RFC1918 networks to allow scanning-based discovery
# $config['nets'][] = "10.0.0.0/8";
# $config['nets'][] = "172.16.0.0/12";
$config['nets'][] = "192.168.0.0/24";
$config['nets'][] = "192.168.1.0/24";
$config['nets'][] = "192.168.2.0/24";

# following is necessary for poller-wrapper
# poller-wrapper is released public domain
$config['poller-wrapper']['alerter'] = FALSE;
# Uncomment the next line to disable daily updates
$config['update'] = 1;

# Uncomment to submit callback stats via proxy
#$config['callback_proxy'] = "hostname:port";
